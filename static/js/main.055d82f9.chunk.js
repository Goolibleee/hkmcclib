(this.webpackJsonphkmcclib=this.webpackJsonphkmcclib||[]).push([[0],{118:function(e,t){},122:function(e){e.exports=JSON.parse('{"user":{"code":["USER_CODE"],"name":["USER_NAME"],"phone":["PHONE_NUMBER"],"address":["ADDRESS"],"email":["EMAIL"],"level":["USER_LEVEL"],"state":["USER_STATE"],"notice":["NOTICE"],"disableDate":["DISABLE_DATE"],"delayDay":["DELAY_DAY"],"delayCharge":["DELAY_CHARGE"],"regDAta":["REG_DATE"],"modDate":["MOD_DATE"],"userImage":["USER_IMAGE"],"seq":["SEQ"]},"rent":{"seq":["SEQ"],"barcode":["BARCODE"],"state":["STATS"],"user":["USERS"],"rentDate":["RENT_DATE"],"returnDate":["RETURN_DATE"],"reserveUser":["RESERVE_USER"],"reserveDate":["RESERVE_DATE"],"extendCount":["EXTEND_COUNT"]},"book":{"barcode":["BARCODE"],"name":["BOOKNAME"],"number":["BOOKNUM"],"author":["AUTHOR"],"totalName":["TOTAL_NAME"],"category":["CATEGORY"],"authorCode":["AUTHOR_CODE"],"claimNum":["CLAIMNUM"],"copyNum":["COPYNUM"],"exCate":["EX_CATE"],"isbn":["ISBN"],"publish":["PUBLISH"],"attach":["ATTACH"],"claim":["CLAIM"],"location":["LOCATION"],"bookIn":["BOOKIN"],"regDate":["REG_DATE"],"modDate":["MOD_DATE"],"seq":["SEQ"]}}')},123:function(e,t,n){},228:function(e){e.exports=JSON.parse('{"type":"service_account","project_id":"hkmcclibrary","private_key_id":"c329a7aa203b977f59840d0184d5acd82aba622e","private_key":"-----BEGIN PRIVATE KEY-----\\nMIIEvAIBADANBgkqhkiG9w0BAQEFAASCBKYwggSiAgEAAoIBAQDg2zirERJJJdly\\nviAf3OU668Ocdk8suJg7BBnI+IqU8QcuVYkuBV+a0NwsElu42W3+xV4y+JcWgldu\\nUfPjHmdyiqTt3eBrzN40ePqLGjM+o//xYC7lZxhrtUomB0gpZm0NINnqLYRYrfuC\\neEIJKNHpPBsn4vQnY6xPDWHp133VRzYEHmocAHFAwWdUMd0XMTf22m++9/Wgxgfq\\nmYPTW5mGMp2SBR0+7hX+Cbr3qiaTwzImJW/RgTo9Etyo7vjgkF8tPT1Fwv/F7ExS\\nnBcNqcC7oYYlCpyKsdu9B25+xL1Z4nVTyDPE+tikC7cmJArbdOJxfeK901CvUR0d\\nJdb6cVxRAgMBAAECggEAMzIGlYBmCuyItWTPeKG5OXCbkYCoZzTCSFGXM1hPaTj1\\nmxmTibxkd6HNN2WYp54tup+iYnWSJOhZUr9rCY+PGxexFI17ft/eydCvrsMw3rbF\\nW+Y71zRhbYiR0NXAmth8xMvxga2KYAyA4sRRuLcoD/QE9NBqKZu6jCcuX2kWd9v4\\n/GdP47Ww7aiJE6PubNizoUByUDUor+PJEZuI2XuPMVnwTP63bcWig2aNKvzgvCIU\\nEEDEGw4a1enEePJDv1TvtOs3jV2+W10R9cTjpfuV2EZQxNjWxtEGaX/8rRLC/YPY\\nJRvwROZO/Q5S1HocsnJSc2kr0J5Uz+/8WSjOYr8y6QKBgQD5jzJgwcJTH2cxaDle\\nFmVX9S+MvM9orKBcSFFaLwzchMlN6A63kUMqljxgZM9stXSbtQsC8VR9lDSWLb9n\\nErRrh3l/cUYvNnO1emxNfHNJas6SUwlwO0eLWgr0gHSwngF0k7vOUtqtycL67EYK\\nEAkxrDCW/5pGZD3Z5XwlP0EHLQKBgQDmqNCvIor3uDWuNhG7bGHf0Y887mud8kKq\\nYiHTymeweWjwkRxvMRxYM9e9qPoTXWWH8o9mgVAoh9CI80BNZlNO+3z2jD7IHhxt\\nhHCmFNDeV7WoM1Kc1jMkvX8wQzSbXi6J7OcMe9oemMIefjgxC876BlcHPa8le0wC\\n3qKoyrJgNQKBgDXZBRjFliWTaBPMFlzL3lAtUnY+o05FuVBQNmWMM209paYOxWYs\\njN6ajiqKdgtR1/hlBxw6cG2sVfB1rJAUBCQTlk6+ZVN4n1zwLoBFsyaLSklea3Hx\\nCI3z/tslAIi/fzblTafGTvMiztSPuMkhDqrOKanbOzGnHYVvs+rhjCl9AoGAOzLQ\\nfGJtMC7C+DdATc3/QKZUENtQG3V1zqzo6aZk/lHqsPNNTOxZzflgQXkA1b9+s2l5\\njGFb5UsWJk/oDPVaJEc/RzevVUUFHsaC8t0czjPMl6K0bTQ8ZA2OeyCEe+usHhID\\nKp0O2hNynsjeOxhAwsKly2H1dbUzSPlC3fdH2JECgYA8UdCjBlTglscpUcDxn/oF\\nSnC5+E9cUWHQhXboW2KP0gR4nTaG9C2ZgOzKyj0la8oWpT41ywkmxH9eqMnhEjay\\nz32ApYPo8RdK9B+Rx+6n4fpJAXUGTuWmyBbo01YrcrevKuC6qAMG882TIJogQkEq\\nGsDWTTysqnU/PZ+HBGRcfg==\\n-----END PRIVATE KEY-----\\n","client_email":"hkmcclib@hkmcclibrary.iam.gserviceaccount.com","client_id":"107721299691176884566","auth_uri":"https://accounts.google.com/o/oauth2/auth","token_uri":"https://oauth2.googleapis.com/token","auth_provider_x509_cert_url":"https://www.googleapis.com/oauth2/v1/certs","client_x509_cert_url":"https://www.googleapis.com/robot/v1/metadata/x509/hkmcclib%40hkmcclibrary.iam.gserviceaccount.com"}')},234:function(e,t,n){},235:function(e,t,n){},248:function(e,t){},250:function(e,t){},292:function(e,t){},294:function(e,t){},326:function(e,t){},328:function(e,t){},329:function(e,t){},334:function(e,t){},336:function(e,t){},342:function(e,t){},344:function(e,t){},36:function(e){e.exports=JSON.parse('{"loading":"Loading in progress...","noSheet":"\u2757 Could not find spreadsheet with today\'s date!","reloadPage":"Please create the spreadsheet for today and reload the app to check in!","loaded":"\u2705 Ready to check in!","noStudent":"\u2757 Student ID could not be found!","checkIn":"\ud83d\udc4b Checked in {0} at {1}!","checkOut":"\ud83d\udeaa Checked out {0} at {1}!","alreadyDone":"\ud83d\udfe1 {0} is already accounted for!","failedToOpen":"\u2757 Could not find data to use.","succeededToOpen":"\u2705 Found ID data."}')},363:function(e,t){},375:function(e,t){},378:function(e,t){},427:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(81),o=n.n(a),s=(n(234),n(2)),i=n(9),u=(n(235),n(19)),d=n(6),l=(n(123),n(18)),h="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAVAAAAD4CAMAAACNDk7cAAABhGlDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV9TtVIqDnYQcchQnSyIiugmVSyChdJWaNXB5NIvaNKQpLg4Cq4FBz8Wqw4uzro6uAqC4AeIq4uToouU+L+k0CLGg+N+vLv3uHsHCI0KU82ucUDVLCMVj4nZ3KoYeIWAIALowazETD2RXszAc3zdw8fXuyjP8j735+hT8iYDfCLxHNMNi3iDeHrT0jnvE4dZSVKIz4nHDLog8SPXZZffOBcdFnhm2Mik5onDxGKxg+UOZiVDJZ4ijiiqRvlC1mWF8xZntVJjrXvyF4by2kqa6zSHEccSEkhChIwayqjAQpRWjRQTKdqPefiHHH+SXDK5ymDkWEAVKiTHD/4Hv7s1C5MTblIoBnS/2PbHCBDYBZp12/4+tu3mCeB/Bq60tr/aAGY+Sa+3tcgR0L8NXFy3NXkPuNwBBp90yZAcyU9TKBSA9zP6phwwcAsE19zeWvs4fQAy1NXyDXBwCIwWKXvd4929nb39e6bV3w9eQ3Kf4zoCAAAAAf5QTFRF////AAAAAFSmu8Pjy9Hq29/x7vD4kZ/RnqrXoKzXrLfdg5TLdovGYn2+aYLAW3m7eJDITnC3PGmzLGKuFluqD16rEF+sH2mxI2uyP368T4nCb57Nf6nSj7TYr8njv9Tp7/T5L3S2O3y7R4S/U4zDX5THn7/dz9/u3+r0/v7+/f39+/v7+fn59/f39PT08/Pz8fHx7u7u7e3t6+vr6Ojo5+fn5OTk4uLi4ODg3t7e3d3d2tra2dnZ1tbW1dXV09PT0NDQz8/Pzc3Ny8vLyMjIx8fHxcXFwsLCwMDAv7+/vb29urq6ubm5tra2tLS0srKysLCwrq6urKysqqqqqKiopqampKSkoqKioKCgn5+fnp6enZ2dmpqamZmZl5eXlJSUkpKSkZGRj4+PjY2NioqKiYmJh4eHhISEgoKCgYGBf39/fHx8e3t7eHh4d3d3dHR0cnJycHBwb29vbGxsa2traGhoZ2dnZWVlY2NjYGBgXl5eXFxcWlpaWFhYV1dXVFRUUlJSUFBQTk5OTExMS0tLSEhIRkZGREREQkJCQEBAPj4+PDw8Ojo6ODg4Nzc3NDQ0MzMzMDAwLi4uLS0tKioqKSkpJycnJCQkIiIiISEhHx8fHR0dGhoaGBgYFxcXFBQUEhISERERDg4ODAwMCwsLCAgIBwcHBQUFAwMDAQEBl/y7dgAAAAFiS0dEAIgFHUgAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfnAgoHCBObwO/NAAAKr0lEQVR42u2d2XrbNhCF+dGJ48apU8VGWXAD2ZbL+z9hJXlpRGEZADMgqcy58oVkUj+xDGYOwCxjsVgsFovFYrFYLBaLxWKxWCwW6xY0So1+u/zMH5qPMDmD6lyjx8vPHDQfYXIMlIEyUBYDZaAMlIEyUAbKQBkoA2WgDJSBshgoA2WgDJSBMlAGykAZKANloAyUgTJQBspAWQyUgTJQBspAGSgDZaAMlIEyUAbKQBkoA2WgLAbKQBkoA2WgDJSBMlAGykAZKANloAyUgTJQFgNloEmkPXsJqCIQaMQlq322shgBgEZIMlAGykAZKANloFsB+qcs63pUMwPFVl/WqmOg2FSHtmOg2FCbmYHeMlN0oF8u///veRKV7Y0Cff66vMDDSxqkxdjdINBvmivcP6Uhmou6uzGgL1/113jIfyGkiEBfPpkukoxoLkYqUJNSqj6pPf6RBugn81XSEc17hU2yrUt5fRl5XLDRAv1iu6tv6YjmFV6/V7UU1qdXjTMV0IP91p4TEi1QGmk3lgJ0taolAfrZfnt3eb6nRnqk6TNyDy060CfXLeIsmf7sgSPpFDVsDsL3xsSgcIF+ct3kV7R86KyaShJO960MHGmaDg/oD/d9vmABfWtFjWOIGwLLwEXE7Q0zFtBH950+4QI9T8KV7dfLgIFUFbE3OOAAvXPf6wM+0FP/tPyA3pfoJPOt6N59t3ckQI8TcmNsVcJrauqqfDsC3O89XZHOOO75EI3u7amBZnRAzUjBRDfVPDcA9BiuiBiiU5Ez0GUbK8OJjnm+P6CfiYEeZ3xtIy3cc70z1ClkXSt1rlvP5zSe7ImBfl5vlnc2Ulf01NmDJWkwAKhmIBwnvrqBPtIDPfZdXSMt7Tx7WNZDp7kpiYA+uYF+TwFUP7tUYTULUCnVLy8FL3+kCUMBZjFtg2v9R1BRgYv9lqUFYZ//kgho1mkAidmTqG+5Tw3YQA+uSz6nAqoF1Ht9IaR6Og9pmyhOAwX6QzW/rfb4Qhnm7OlqgQn02Zof+fySEqiO6AStpkdUpHBb6XfbpX7kSYFqiPbAtdIQVY6aMaf8b8TJZR+gWenZ6d+IimjTGWYjfSTnCQeqiZ5mN9G42h6+WexJO47ef8/TA8064b3K8k/xk7vvfmhKIXeYHgePXSDT1Zddsw2KPwLbcPu0SJPc4VqYfbbVNJ7z0kYdzPnh4YPppy8/kP+51z6lqyzSuEugp5X94fD4eDgQeJe9gM7LYbTYl50xhfx20jUYTdRoZ2zULwf0qtP7NlGnnXGgszNuEujsO9FvyM64SaBZFfj99e2MGwV6Fd6DEklbsDNuFOjV7wMcWrIJO+NmgS6bqNiJnXFloKdiudJXe2uf8tJ27IyrAe3anyObQl5ty1g20YHaziiVIfksCLkMOMu8uem1ccxkSVAKer+YASlyiSQ0HLSMdtISG87GrJOpz7eItWBTVWokcvQWGDgdv7/8eGg9pHdg2xlNG3vmisK/05Dj/LnnNYCniW9nNG9DmfCZxh7AAJ085Hkw7dxXJ7EzysnmicIcT2MTvbVnz5OulBOVndFaF5zGSoot9PjJy5p5KmM29kHUbWfMQu2M7qKfUk39rjE0ho0qLY6+T1V2s3UQpbUz1imy/TE8AyZjsQyIupR2Rp/KdHqgXZgx4y9rFGywM9ZIdkbRbBdoh+NsrxPbGeW8UaBIPK9Dexw7o4hupImBYvHUpKzI7YywRpoWqJmnOFUglRrrErYEEVR2xs7S8SGNPilQE09xkVvS558AN0BvZyzGbQHtoXcJcL1OhHZG1fum9dYBOngM9s7EoyK0Mx4XZiIUaUKg2kuVnXnKDUjH4tgZ7f3ejjQd0NYrP+boecZkAt6ZZK2li/Tj+kAnzf0VU/iAVGfUsi7pjHvKUgGdNTwBvdOclqIHah1Jc9OhvImA6gIm0GhnDAtDgB4D3fY1yWYqWC+bgSOAK6qrE7lDgY7RPKHBoiHX5wV0GnXp5EJWTXwUVJR1+/F0ZvVPnoCojifcP6KvFYGBqtqefNbYGcNz4Zj5HoL+bpsdQJeHGvAWdsZFIxWJiEL77BzJU9/xKjSab9N2aexzc6qztWBrEl28JHxzQddBoauFxtgZSQ0UYXVrR3XXf3V41czrUEeKve833br9vuxCop6grTH/Xv6PNtJCYR7JpiS2lLBEtt5ZGPaWPwVZy6P0T6P3Lg1Sc47QkGAItO3VMKD7tTO6kJoeaOgLvypbHRm9YxrtjGmmp8uU+7nfmUKW4PSaBKx9MWdjmdjOeB1zvC/jZlWbA8DwdOVlb+s9y0EhMtoZ6+0cWxjOs3MOHDu3M4Z1o/B0eusKQ3duZ8RxJ4RP8iOoYHXROV4L1efWfrYzlpuyM9KmU9xz0qLlBNoZJ4CdsUhjZ6RZp4KH0BxuSHHaGcdN2BmJMinQIVRCf8Vu7IxYIUhgTb8GjaBedsY+eIGNA/Rvr7VUdHVXOBaeu7cz5qOHrzv+NXOts0a4dztjXoK36Q0Ir0Adlhd3fWR3dsbzViFIqmDA8HIs53hta2lQhhhbeoXSzvg+L9hTBWLAeUHveP0wbZ+KmwHXsTP+v7PFbOcs0Q6tWnSE3sp9n3bGi9VfN1bLW5AV4puOW0iPfye6UztjfrX5alIf6y81ZahaDiudZWzoO5RLJrczBtfa4qtJ1pcE7NbOqGmiZFo20ESvTXfYGSeCpWeaJtqu9BzT2hlfH1OX4mcVaFnALdsZYyrsUZnloKeYzM44hdsZtXleAs2xD3E3dkZriE03I3mdzbEvO2N8WQMyL4TXpTxf6lOOprFkTvqqUEXKcwqeB3dpZySf6a9rRcAesVs7Yx7uVYLoqs8WoMdHYmdMd2TjQMazDlpK7N3OSLdgGkN6wy3YGYmITtoqQXi+HQNpKjsjRXyv2ezgnJFaxBa0qp1RTCl4ulYRt2RnFIqep2svzo3ZGXHHUSW8r3BzdsaGdH53RmduO2P5YWc85fEaDDvjTGpnxItHdVO1vVYUamccAXZG52h2Oh3pXW3oOK57Lj1OEV4Lxz6A3oCdUbeDE6Eibhg+PV7pucwh7eZ0xtYr0oA3zypoytu/ndE0q0YaFw1vSXCHELdwOqMhTinDR1JTZA6Z7lDsjNW6pzMaiIpAO6jRSggLHy6JDrs8ndEUSwchNSYxoeHYvu2MjtWJL1JLy4AHLbu2M7rXex5O22nAWdLewumMStiKs5D4bbYdJ+25uWnEWl6seDqjPcdTOGyiyp618U4LjjHbSYH9nvp0xs6VcJXVqOMytZXrm70/nJs4nRHyPwo5vHq0zpmECvQejhTOKdtEmdTOCFh+x2Z322xtjaudzhj49gSbyi5bXwntjJTlsW00Tyifs53xva2G2xnpCrjnGLbLtqJUdkYqi8F5cFLZlpTG1kRjggEu71KPpHItoJE2rW3iRGspQUCPSPubw5mk39sWK6ExVKmy7Yrazhie7zA1znrOti1aO6Mz2vDyqsDyUusjrcRqQE9MG9jsKJtd0Hzr+MV6QM/jqf2FU6KsVbYzEdkZfZ6qamq5sAAJeTo4rct2KRI7Y1B/Ua/aKcfwKYIK6G0J2c7IQM9Q8eyMDPOnmRfDzsgYCWtKLAbKQBkoA2WgDJTFYrFYLBaLxWKxWCzW7vQfkXjrGssMcKwAAAAASUVORK5CYII=",b=n(428),f=10,O=function(e){return new Promise((function(t){return setTimeout(t,Math.ceil(1e3*e))}))};String.prototype.format=function(){for(var e=this,t=0;t<arguments.length;t++){var n=new RegExp("\\{"+t+"\\}","gi");e=e.replace(n,arguments[t])}return e};var j={position:"top-center",autoClose:3e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0},p=n(36),g=n(4);var x=function(e){var t=Object(c.useState)(""),n=Object(d.a)(t,2),r=n[0],a=n[1],o=Object(b.a)(r,50),x=Object(d.a)(o,1)[0],A=Object(c.useState)([]),v=Object(d.a)(A,2),S=v[0],m=v[1],E=Object(c.useState)([]),k=Object(d.a)(E,2),C=k[0],y=k[1],D=Object(c.useState)(0),T=Object(d.a)(D,2),B=T[0],R=T[1],w=Object(c.useState)([]),U=Object(d.a)(w,2),I=U[0],H=U[1],N=Object(c.useState)([]),P=Object(d.a)(N,2),Y=P[0],K=P[1];return Object(c.useEffect)((function(){function t(){return(t=Object(i.a)(Object(s.a)().mark((function t(){var n,c,r,a,o,i,u,d,h,b,f,g,x,A,v,S,m;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:l.c.dismiss();case 1:if(e.doc.isOpen()){t.next=6;break}return t.next=4,O(.1);case 4:t.next=1;break;case 6:return t.next=8,e.doc.sheetsByTitle("rent");case 8:return n=t.sent,t.next=11,e.doc.sheetsByTitle("book");case 11:if(c=t.sent,n&&c){t.next=17;break}return(r=j).autoClose=3e3,l.c.error(p.failedToOpen,r),t.abrupt("return");case 17:return a=e.doc.getCachedList("rent"),o=e.doc.getCachedList("book"),console.log("Cached data"),console.log(a),console.log(o),i=null,a.has(n.header.barcode.toString())&&o.has(c.header.barcode.toString())&&o.has(c.header.name.toString())||(console.log("Data should be loaded"),(u=j).autoClose=!1,i=l.c.info(p.loading,u)),t.next=26,e.doc.readList("rent",[n.header.barcode]);case 26:return d=t.sent,console.log(d),h=d[0],t.next=31,e.doc.readList("book",[c.header.barcode,c.header.name]);case 31:for(b=t.sent,f=b[0],g=b[1],x=[],A=0;A<h.length;A++)x.push(h[A]);for(K(x),console.log("rentList"),console.log(x),v=[],S=0;S<f.length;S++)v.push({code:f[S],name:g[S]});H(v),i&&((m=j).type=l.c.TYPE.SUCCESS,m.render=p.succeededToOpen,m.autoClose=3e3,l.c.update(i,m));case 43:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[]),Object(c.useEffect)((function(){function e(e){return t.apply(this,arguments)}function t(){return(t=Object(i.a)(Object(s.a)().mark((function e(t){var n,c,r,a,o,i,d;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],c=Object(u.a)(I),e.prev=2,c.s();case 4:if((r=c.n()).done){e.next=11;break}if(a=r.value,!(n.length>=500)){e.next=8;break}return e.abrupt("break",11);case 8:a.name&&a.name.toString().includes(t)&&(o="".concat(a.name),console.log(a.code),i="",Y.includes(a.code)&&(i="Rent"),d={text:o,name:a.name,code:a.code.toString(),rent:i},n.push(d));case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),c.e(e.t0);case 16:return e.prev=16,c.f(),e.finish(16);case 19:return e.abrupt("return",n);case 20:case"end":return e.stop()}}),e,null,[[2,13,16,19]])})))).apply(this,arguments)}function n(){return(n=Object(i.a)(Object(s.a)().mark((function t(){var n;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!x){t.next=7;break}return t.next=3,e(x);case 3:(n=t.sent).length>0&&m(n),t.next=8;break;case 7:m([]);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){n.apply(this,arguments)}()}),[x,I,Y]),Object(c.useEffect)((function(){var e=S.length;if(console.log("Page num "+B.toString),e>f){var t=B*f,n=Math.min(f,e-t);y(S.slice(t,t+n))}else y(S),R(0)}),[S,B]),Object(g.jsxs)("div",{id:"search",children:[Object(g.jsxs)("div",{id:"title",children:[Object(g.jsx)("img",{id:"logo",src:h,alt:"HKMCC"}),Object(g.jsx)("h1",{children:" Search Books"})]}),Object(g.jsxs)("div",{id:"searchContents",children:[Object(g.jsx)("input",{id:"search",placeholder:"Search for book name...",value:r,onChange:function(e){a(e.target.value)}}),C.map((function(e){return Object(g.jsx)("div",{id:"searchResult",children:Object(g.jsx)("table",{children:Object(g.jsx)("tbody",{children:Object(g.jsxs)("tr",{children:[Object(g.jsxs)("td",{children:[" ",e.text]}),Object(g.jsxs)("td",{children:[" ",e.rent," "]})]})})})},e.code)}))]}),S.length>f&&Object(g.jsxs)("div",{id:"pageControl",hidden:S.length<=f,children:[Object(g.jsx)("button",{id:"prevPage",onClick:function(){B>0&&R(B-1)},children:" << "}),Object(g.jsxs)("p",{id:"pageNum",children:[" ",B+1," "]}),Object(g.jsx)("button",{id:"nextPage",onClick:function(){S.length>(B+1)*f&&R(B+1)},children:" >> "})]})]})},A=new Set;var v,S=function(e){var t=Object(c.useState)(""),n=Object(d.a)(t,2),r=n[0],a=n[1],o=Object(c.useState)([]),f=Object(d.a)(o,2),x=f[0],v=f[1],S=Object(c.useState)([]),m=Object(d.a)(S,2),E=m[0],k=m[1],C=Object(c.useState)([]),y=Object(d.a)(C,2),D=y[0],T=y[1],B=Object(b.a)(r,50),R=Object(d.a)(B,1)[0],w=Object(c.useState)([]),U=Object(d.a)(w,2),I=U[0],H=U[1],N=Object(c.useState)({code:-1}),P=Object(d.a)(N,2),Y=P[0],K=P[1];Object(c.useEffect)((function(){function t(){return t=Object(i.a)(Object(s.a)().mark((function t(){var n,c,r,a,o,i,u,d,h,b,f,g,x,A,S,m,E,C,y,D,T;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:l.c.dismiss();case 1:if(e.doc.isOpen()){t.next=6;break}return t.next=4,O(.1);case 4:t.next=1;break;case 6:return t.next=8,e.doc.sheetsByTitle("user");case 8:return n=t.sent,t.next=11,e.doc.sheetsByTitle("rent");case 11:return c=t.sent,t.next=14,e.doc.sheetsByTitle("book");case 14:if(r=t.sent,n&&c&&r){t.next=20;break}return(a=j).autoClose=3e3,l.c.error(p.failedToOpen,a),t.abrupt("return");case 20:return console.log(n.header),console.log(n.header.name),o=e.doc.getCachedList("user"),i=e.doc.getCachedList("rent"),u=null,o.has(n.header.code.toString())&&o.has(n.header.name.toString())&&i.has(c.header.barcode.toString())&&i.has(c.header.user.toString())&&i.has(c.header.rentDate.toString())&&i.has(c.header.returnDate.toString())||(console.log("Data should be loaded"),(d=j).autoClose=!1,u=l.c.info(p.loading,d)),console.log(r.header),console.log(n.name),t.next=30,e.doc.readList("user",[n.header.code,n.header.name]);case 30:return h=t.sent,b=h[0],f=h[1],t.next=35,e.doc.readList("rent",[c.header.barcode,c.header.user,c.header.rentDate,c.header.returnDate]);case 35:for(g=t.sent,x=g[0],A=g[1],S=g[2],m=g[3],E=[],C=[],y=0;y<Math.min(b.length,f.length);y++)E.push({code:b[y],name:f[y]});for(v(E),D=0;D<Math.min(b.length,f.length);D++)C.push({code:x[D],user:A[D],rentDate:S[D],returnDate:m[D]});k(C),M(r.header),console.log("Sheet read "+E.length),u&&((T=j).type=l.c.TYPE.SUCCESS,T.autoClose=3e3,T.render=p.succeededToOpen,l.c.update(u,T));case 49:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){t.apply(this,arguments)}(),function(){return l.c.dismiss()}}),[]),Object(c.useEffect)((function(){function e(e){return t.apply(this,arguments)}function t(){return(t=Object(i.a)(Object(s.a)().mark((function e(t){var n,c,r,a,o,i;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],c=Object(u.a)(x),e.prev=2,c.s();case 4:if((r=c.n()).done){e.next=11;break}if(a=r.value,!(n.length>4)){e.next=8;break}return e.abrupt("break",11);case 8:(a.code&&a.code.toString().includes(t)||a.name&&a.name.toString().includes(t))&&(o="".concat(a.code,": ").concat(a.name),i={code:a.code,name:a.name,text:o},n.push(i),A.add(a.code));case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),c.e(e.t0);case 16:return e.prev=16,c.f(),e.finish(16);case 19:return e.abrupt("return",n);case 20:case"end":return e.stop()}}),e,null,[[2,13,16,19]])})))).apply(this,arguments)}function n(){return(n=Object(i.a)(Object(s.a)().mark((function t(){var n;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!R){t.next=7;break}return t.next=3,e(R);case 3:(n=t.sent).length>0?H(n):(console.log("No matching student"),H([])),t.next=9;break;case 7:console.log("No matching student"),H([]);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){n.apply(this,arguments)}()}),[R,x]);var L=function(){var e=Object(i.a)(Object(s.a)().mark((function e(t){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Select "+Y.code+" "+t),console.log(Y),Y&&Y.code&&Y.code===t?(console.log("Deselect"),K({code:-1})):(console.log("Selected"),K({code:t}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var t=Object(i.a)(Object(s.a)().mark((function t(n){var c,r,a,o;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.doc.readList("book",[n.barcode,n.name]);case 2:for(c=t.sent,r=c[0],a=c[1],o=0;o<r.length;o++)D.push({code:r[o],name:a[o]});T(D),console.log("Book loaded "+D.length.toString());case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),W=function(e){var t=Y.code!==e.code,n=[];if(!t){var c,r=Object(u.a)(E);try{for(r.s();!(c=r.n()).done;){var a=c.value;a.user===e.code&&(console.log(a),n.push(a))}}catch(o){r.e(o)}finally{r.f()}}return Object(g.jsxs)("div",{children:[Object(g.jsxs)("button",{type:"button",id:"searchResult",onClick:Object(i.a)(Object(s.a)().mark((function t(){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L(e.code);case 2:case"end":return t.stop()}}),t)}))),children:[" ",e.text," "]}),Object(g.jsx)("div",{hidden:t,children:Object(g.jsx)("table",{children:Object(g.jsxs)("tbody",{children:[Object(g.jsxs)("tr",{children:[Object(g.jsx)("th",{id:"bookname",children:"Book name"}),Object(g.jsx)("th",{id:"rentDate",children:"Rent date"}),Object(g.jsx)("th",{id:"returnDate",children:"Return date"})]}),n.map((function(e){return function(e){var t=e.rentDate.split(" ")[0];console.log(t);for(var n="",c=0;c<D.length;c++)D[c].code===e.code&&(n=D[c].name);return Object(g.jsxs)("tr",{children:[Object(g.jsxs)("td",{children:[" ",n," "]}),Object(g.jsxs)("td",{children:[" ",t," "]}),Object(g.jsxs)("td",{children:[" ",e.returnDate," "]})]},e.code)}(e)}))]})})})]},e.code)};return Object(g.jsxs)("div",{id:"checkOut",children:[Object(g.jsxs)("div",{id:"title",children:[Object(g.jsx)("img",{id:"logo",src:h,alt:"HKMCC"}),Object(g.jsx)("h1",{children:"Check Out Status"})]}),Object(g.jsxs)("div",{id:"checkOutInput",children:[Object(g.jsx)("input",{id:"search",placeholder:"Search for name or enter a number...",value:r,onChange:function(e){a(e.target.value)}}),I.map((function(e){return W(e)}))]})]})},m=(n(237),n(84)),E=n(3),k=n(33),C=n(34),y={production:"10kEEHTROfroJRaScbkXMevTmUBW17elq9Y3rlDvBam4",development:"1Wpqayv5GGo632hL54iYyfrZcntfyqMEsrWDqSDkdU2c"},D=n(228),T=n(122),B=n(238).GoogleSpreadsheet;function R(e,t){var n,c=Object(u.a)(t);try{for(c.s();!(n=c.n()).done;){if(n.value===e)return!0}}catch(r){c.e(r)}finally{c.f()}return!1}console.log("Production mode"),v="production";var w=function(){function e(){Object(k.a)(this,e),console.log("Create Doc class"),this.doc=new B(y[v]),this.initialized=!1,this.sheets={}}return Object(C.a)(e,[{key:"openDoc",value:function(){var e=Object(i.a)(Object(s.a)().mark((function e(){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("try to read sheet"),e.next=3,this.doc.useServiceAccountAuth(D);case 3:return console.log("Auth Done"),e.next=6,this.doc.loadInfo();case 6:console.log("Done"),this.initialized=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isOpen",value:function(){return this.initialized}},{key:"getCachedList",value:function(e){return new Set(Object.keys(this.sheets[e].cachedList))}},{key:"sheetsByTitle",value:function(){var e=Object(i.a)(Object(s.a)().mark((function e(t){var n,c,r;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t in this.sheets)){e.next=2;break}return e.abrupt("return",this.sheets[t]);case 2:return e.next=4,this.doc.sheetsByTitle[t];case 4:return n=e.sent,e.next=7,n.loadCells("A1:Z1");case 7:return c=this.createHeader(t,n),console.log(c),r={sheet:n,name:t,header:c,cachedList:{}},this.sheets[t]=r,e.abrupt("return",r);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createHeader",value:function(e,t){if(!t)return{};var n={},c=T[e],r=Object.keys(T[e]);console.log(r);for(var a=0;a<Math.min(26,t.columnCount);a++){var o=t.getCell(0,a);if(null!=o.valueType){var s,i=Object(u.a)(r);try{for(i.s();!(s=i.n()).done;){var d=s.value;R(o.value,c[d])&&(n[d]=a)}}catch(l){i.e(l)}finally{i.f()}}}return n}},{key:"readList",value:function(){var e=Object(i.a)(Object(s.a)().mark((function e(t,n){var c,r,a,o,i,u,d,l,h,b,f,O,j,p,g,x,A;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((c=this.sheets[t]).sheet){e.next=3;break}return e.abrupt("return",[]);case 3:for(r=!0,a=[],o=0;o<n.length;o++)n[o]in c.cachedList?a.push(c.cachedList[n[o]]):(a.push([]),r=!1);if(!r){e.next=8;break}return e.abrupt("return",a);case 8:for(i=0;i<n.length;i++)a[i]=[];u=1,d=5e3,console.log(n),l=c.sheet.rowCount,h=n[0],b=n[n.length-1];case 15:if(!(u<l-1)){e.next=26;break}return f=Math.min(l-u,d),O=String.fromCharCode(65+h)+(u+1)+":"+String.fromCharCode(65+b)+(u+f),console.log(h.toString()+"~"+b.toString()+" "+O),e.next=21,c.sheet.loadCells(O);case 21:for(console.log(f),j=0;j<f;j++)for(p=0;p<n.length;p++)g=c.sheet.getCell(u+j,n[p]),x=null,null!=g.valueType&&(x=g.formattedValue),a[p].push(x);u+=f,e.next=15;break;case 26:for(A=0;A<n.length;A++)c.cachedList[n[A]]=a[A];return console.log("Cached"),console.log(c.cachedList),e.abrupt("return",a);case 30:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getStudent",value:function(){var e=Object(i.a)(Object(s.a)().mark((function e(t){var n,c,r,a,o,i,u,d,l;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.sheets.user.sheet){e.next=3;break}return e.abrupt("return",null);case 3:return c=t,e.next=6,this.findStudentRow(c);case 6:if(r=e.sent){e.next=9;break}return e.abrupt("return",null);case 9:return a=this.sheets.user.header,console.log("Student ID: "+c+" Index:"+r),o=String.fromCharCode(65)+r+":"+String.fromCharCode(90)+r,console.log(o),e.next=15,n.loadCells(o);case 15:return i=r-1,console.log("Get Cell "+i+" "+a.name),u=n.getCell(i,a.name),d=n.getCell(i,a.checkIn),l=n.getCell(i,a.checkOut),e.abrupt("return",{idx:i,name:u,checkIn:d,checkOut:l});case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCell",value:function(){var e=Object(i.a)(Object(s.a)().mark((function e(t){var n;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.sheets[t].sheet){e.next=3;break}return e.abrupt("return",null);case 3:return e.next=5,n.saveUpdatedCells();case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"findStudentRow",value:function(){var e=Object(i.a)(Object(s.a)().mark((function e(t){var n,c;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.readList("user",this.sheets.user.header.code);case 2:n=e.sent,console.log("finding student row "+n.length),c=0;case 5:if(!(c<n.length)){e.next=11;break}if(!n[c]||n[c]!==t){e.next=8;break}return e.abrupt("return",c+1);case 8:c++,e.next=5;break;case 11:return e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),U=new w;var I=function(){return Object(c.useEffect)((function(){function e(){return(e=Object(i.a)(Object(s.a)().mark((function e(){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Initialize app"),console.log(Object({NODE_ENV:"production",PUBLIC_URL:"/hkmcclib",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).APP_NAME),console.log(Object({NODE_ENV:"production",PUBLIC_URL:"/hkmcclib",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).APP_VERSION),U.openDoc();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(g.jsxs)(m.a,{children:[Object(g.jsx)("div",{children:Object(g.jsx)("nav",{id:"nav",children:Object(g.jsx)("table",{id:"nav",children:Object(g.jsx)("tbody",{children:Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{id:"nav_item",children:Object(g.jsx)(m.b,{to:"/",children:Object(g.jsx)("button",{id:"nav_checkOut",children:"Check Out"})})}),Object(g.jsx)("td",{id:"nav_item",children:Object(g.jsx)(m.b,{to:"/search",children:Object(g.jsx)("button",{id:"nav_search",children:"Search"})})})]})})})})}),Object(g.jsx)("hr",{}),Object(g.jsxs)("div",{className:"App",children:[Object(g.jsxs)(E.c,{children:[Object(g.jsx)(E.a,{path:"/",element:Object(g.jsx)(S,{doc:U})}),Object(g.jsx)(E.a,{path:"/search",element:Object(g.jsx)(x,{doc:U})})]}),Object(g.jsx)("div",{children:Object(g.jsx)(l.a,{position:"bottom-center",autoClose:10,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,draggable:!0,pauseOnHover:!0,pauseOnFocusLoss:!1,transition:l.b,icon:!1})}),Object(g.jsxs)("h2",{children:["v ",Object({NODE_ENV:"production",PUBLIC_URL:"/hkmcclib",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_VERSION]})]})]})},H=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,429)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),c(e),r(e),a(e),o(e)}))};o.a.render(Object(g.jsx)(r.a.StrictMode,{children:Object(g.jsx)(I,{})}),document.getElementById("root")),H()}},[[427,1,2]]]);
//# sourceMappingURL=main.055d82f9.chunk.js.map